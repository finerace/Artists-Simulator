# System Patterns: Artist's Simulator

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
Infrastructure ‚Üí Services ‚Üí Cosmetic

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã
- **State Machine**: GameStateMachine + UIStateMachine
- **DI**: Zenject constructor injection
- **Events**: Action-based —Ä–∞–∑–≤—è–∑–∫–∞
- **Factory**: Assets + States creation
- **Command**: Debounced saves
- **Local Methods**: –î—Ä–æ–±–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

## üèóÔ∏è –ü–õ–ê–ù–ò–†–£–ï–ú–´–ï –ü–ê–¢–¢–ï–†–ù–´ (Customization System Refactoring)
- **Strategy Pattern**: ISlotHandler –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–ª–æ—Ç–æ–≤
- **Factory Pattern**: SlotHandlerFactory –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **Registry Pattern**: SlotHandlerRegistry –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
- **Dependency Injection**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zenject –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üßô‚Äç‚ôÇÔ∏è Magic Attributes (Fody)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã:
```csharp
using Game.Additional.MagicAttributes;

[LogMethod(LogLevel.Debug)]                      // –∞–≤—Ç–æ–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
[LogMethod(LogLevel.Info, LogLevel.None)]       // —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
                                  // —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
```

### ‚úÖ –ö–û–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `LogMethod`:
- **–†—É—Ç–∏–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: Initialize, Setup, Configure, Load, Save
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã**: InitializeServices, LoadAssets, SetupComponents
- **–ö–æ–≥–¥–∞ –ù–ï –≤–∞–∂–Ω–æ –ß–¢–û –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏**, —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –≤—ã–∑–æ–≤–∞

### ‚ùå –ö–û–ì–î–ê –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `LogMethod`:
- **–ì–¥–µ –≤–∞–∂–Ω—ã –î–ï–¢–ê–õ–ò**: —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ, –¥–æ–±–∞–≤–ª–µ–Ω–æ, –∏–∑–º–µ–Ω–µ–Ω–æ

### ‚úÖ –ö–û–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SafeExecution`:
- **–í–°–ï–ì–î–ê** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç runtime –æ—à–∏–±–æ–∫
- **–í –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å —Ä—É—á–Ω—ã–º –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º** –¥–ª—è –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### üéØ –ì–ò–ë–†–ò–î–ù–´–ô –ü–û–î–•–û–î (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π):
```csharp
  // –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫
public void SpendCoins(int amount)
{
    var oldBalance = coins;
    
    // –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    coins -= amount;
    
    Logs.Info($"Spent {amount} coins. Balance: {oldBalance} ‚Üí {coins}");
}
```

## –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π Logs –∫–ª–∞—Å—Å
- **–£—Ä–æ–≤–Ω–∏**: Debug, Info, Warning, Error
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```csharp
// ‚úÖ –•–û–†–û–®–û - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
Logs.Info($"Added {coins} coins. Balance: {oldValue} ‚Üí {newValue}");
Logs.Warning($"Insufficient funds. Required: {required}, Available: {available}");

// ‚ùå –ü–õ–û–•–û - –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è  
Logs.Info("Method started");
Logs.Info("Operation completed");
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **Graceful Degradation**: –ù–µ –∫—Ä–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ª–æ–≥–≥–∏—Ä—É–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
- **ArgumentException ‚Üí Logs.Error**: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ‚Üí Try* –º–µ—Ç–æ–¥—ã**: TrySpend –≤–º–µ—Å—Ç–æ throw –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Runtime –æ—à–∏–±–∫–∏ ‚Üí SafeExecution**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Fallback –æ–ø–µ—Ä–∞—Ü–∏–∏**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ—Å–ª–∏ –æ–±–ª–∞—á–Ω–æ–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã**: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π 